{"ast":null,"code":"import _toConsumableArray from \"/Users/aleksandartoplek/Documents/jamb/jambapp/.yarn/cache/@babel-runtime-npm-7.7.2-f97af02eaa-1.zip/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/aleksandartoplek/Documents/jamb/jambapp/pages/index.jsx\";\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport ChatBox from '../components/Chat/ChatBox';\n\nfunction uuidv4() {\n  return 'xxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n\nvar data = {\n  userName: \"guest-\" + uuidv4()\n};\nvar apiBaseUrl = \"https://jamb.azurewebsites.net\";\n\nvar Index = function Index() {\n  var _useState = useState(false),\n      isReady = _useState[0],\n      setIsReady = _useState[1];\n\n  var _useState2 = useState(new Array()),\n      messages = _useState2[0],\n      setMessages = _useState2[1];\n\n  var _useState3 = useState(''),\n      newMessageText = _useState3[0],\n      setNewMessageText = _useState3[1];\n\n  var sendMessageClick = function sendMessageClick() {\n    sendMessage(data.userName, newMessageText);\n  };\n\n  function sendMessage(sender, messageText) {\n    return axios.post(\"\".concat(apiBaseUrl, \"/api/messages\"), {\n      sender: sender,\n      text: messageText\n    }).then(function (resp) {\n      return resp.data;\n    });\n  }\n\n  var counter = 0;\n\n  function newMessage(message) {\n    message.id = counter++;\n    messages.unshift(message);\n    setMessages(_toConsumableArray(messages));\n  }\n\n  useEffect(function () {\n    var connection = new window.signalR.HubConnectionBuilder().withUrl(\"\".concat(apiBaseUrl, \"/api\")).configureLogging(window.signalR.LogLevel.Information).build();\n    connection.on('newMessage', newMessage);\n    connection.onclose(function () {\n      return console.log('disconnected');\n    });\n    connection.start().then(function () {\n      return setIsReady(true);\n    })[\"catch\"](function (err) {\n      console.error(err);\n      setIsReady(false);\n    });\n  }, []);\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"JAMB\"), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, data.userName), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, isReady ? \"Connected\" : \"Loading...\"), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, __jsx(\"input\", {\n    value: newMessageText,\n    onChange: function onChange(e) {\n      return setNewMessageText(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), __jsx(\"button\", {\n    onClick: function onClick() {\n      return sendMessageClick();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"Salji\")), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, __jsx(ChatBox, {\n    messages: messages,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default Index;","map":{"version":3,"sources":["/Users/aleksandartoplek/Documents/jamb/jambapp/pages/index.jsx"],"names":["React","useEffect","useState","axios","ChatBox","uuidv4","replace","c","r","Math","random","v","toString","data","userName","apiBaseUrl","Index","isReady","setIsReady","Array","messages","setMessages","newMessageText","setNewMessageText","sendMessageClick","sendMessage","sender","messageText","post","text","then","resp","counter","newMessage","message","id","unshift","connection","window","signalR","HubConnectionBuilder","withUrl","configureLogging","LogLevel","Information","build","on","onclose","console","log","start","err","error","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport ChatBox from '../components/Chat/ChatBox';\n\nfunction uuidv4() {\n  return 'xxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nconst data = {\n  userName: \"guest-\" + uuidv4(),\n};\n\nconst apiBaseUrl = \"https://jamb.azurewebsites.net\";\n\nconst Index = () => {\n  const [isReady, setIsReady] = useState(false);\n  const [messages, setMessages] = useState(new Array());\n  const [newMessageText, setNewMessageText] = useState('');\n\n  const sendMessageClick = () => {\n    sendMessage(data.userName, newMessageText);\n  };\n\n  function sendMessage(sender, messageText) {\n    return axios.post(`${apiBaseUrl}/api/messages`, {\n      sender: sender,\n      text: messageText\n    }).then(resp => resp.data);\n  }\n\n  let counter = 0;\n  function newMessage(message) {\n    message.id = counter++;\n    messages.unshift(message);\n    setMessages([...messages]);\n  }\n\n  useEffect(() => {\n    const connection = new window.signalR.HubConnectionBuilder()\n      .withUrl(`${apiBaseUrl}/api`)\n      .configureLogging(window.signalR.LogLevel.Information)\n      .build();\n\n    connection.on('newMessage', newMessage);\n    connection.onclose(() => console.log('disconnected'));\n\n    connection.start()\n      .then(() => setIsReady(true))\n      .catch((err) => {console.error(err); setIsReady(false);});\n  }, []);\n\n  return (\n    <div>\n      <h1>JAMB</h1>\n      <div>{data.userName}</div>\n      <div>{isReady ? \"Connected\" : \"Loading...\"}</div>\n      <div>\n        <input value={newMessageText} onChange={(e) => setNewMessageText(e.target.value)} />\n        <button onClick={() => sendMessageClick()}>Salji</button>\n      </div>\n      <div>\n        <ChatBox messages={messages} />\n      </div>\n    </div>\n  );\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}